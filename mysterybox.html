<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mystery Box 2024</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Roboto+Flex:opsz,wght@8..144,100..1000&display=swap" rel="stylesheet">
    <style>
        
        body {
            font-family: 'Roboto Flex', sans-serif;
            font-style: normal;
            font-variation-settings:
                "slnt" 0,
                "wdth" 100,
                "GRAD" 0,
                "XOPQ" 96,
                "XTRA" 468,
                "YOPQ" 79,
                "YTAS" 750,
                "YTDE" -203,
                "YTFI" 738,
                "YTLC" 514,
                "YTUC" 712;
        }
        h1, h2, .font-bold, .seat {
            font-family: 'Roboto Flex', sans-serif;
            font-style: normal;
            font-variation-settings:
                "slnt" 0,
                "wdth" 100,
                "GRAD" 0,
                "XOPQ" 96,
                "XTRA" 468,
                "YOPQ" 79,
                "YTAS" 750,
                "YTDE" -203,
                "YTFI" 738,
                "YTLC" 514,
                "YTUC" 712;
        }
        .scrapbook-container {
            position: relative;
            height: 400px;
            width: 98%;
        }

        .scrapbook-item {
            position: absolute;
            box-shadow: 3px 3px 15px rgba(0, 0, 0, 0.1);
            border: 3px solid white;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        @media (max-width: 500px) {
            .scrapbook-container{
                overflow: hidden;
            }
            .scrapbook-item {
                width: 10%;
                height: 10%;
                object-fit: contain;
                cursor: pointer;
            }
        }

        .scrapbook-item:nth-child(1) {
            transform: rotate(-4deg);
            top: 5%;
            left: 3%;
            z-index: 1;
            width: auto;
            height: 45%;
        }

        .scrapbook-item:nth-child(2) {
            transform: rotate(5deg);
            top: 3%;
            left: 25%;
            z-index: 2;
            width: auto;
            height: 60%;
        }

        .scrapbook-item:nth-child(3) {
            transform: rotate(-8deg);
            top: 1%;
            left: 45%;
            z-index: 3;
            width: auto;
            height: 55%;
        }

        .scrapbook-item:nth-child(4) {
            transform: rotate(7deg);
            top: 3%;
            left: 62%;
            z-index: 4;
            width: auto;
            height: 45%;
        }

        .scrapbook-item:nth-child(5) {
            transform: rotate(-10deg);
            top: 2%;
            left: 82%;
            z-index: 2;
            width: 20%;
            height: auto;
        }

        .scrapbook-item:nth-child(6) {
            transform: rotate(-10deg);
            top: 35%;
            left: 3%;
            z-index: 1;
            width: auto;
            height: 50%;
        }

        .scrapbook-item:nth-child(7) {
            transform: rotate(-6deg);
            top: 40%;
            left: 70%;
            z-index: 4;
            width: 30%;
            height: auto;
        }

        .scrapbook-item:nth-child(8) {
            transform: rotate(5deg);
            top: 50%;
            left: 25%;
            z-index: 3;
            width: auto;
            height: 50%;
        }

        .scrapbook-item:nth-child(9) {
            transform: rotate(-2deg);
            top: 55%;
            left: 1%;
            z-index: 2;
            width: auto;
            height: 55%;
        }

        .scrapbook-item:nth-child(10) {
            transform: rotate(3deg);
            top: 30%;
            left: 60%;
            z-index: 3;
            width: 40%;
            height: auto;
        }

        .scrapbook-item:nth-child(11) {
            transform: rotate(-4deg);
            top: 95%;
            left: 4%;
            z-index: 1;
            width: auto;
            height: 55%;
        }

        .scrapbook-item:nth-child(12) {
            transform: rotate(8deg);
            top: 80%;
            left: 65%;
            z-index: 3;
            width: auto;
            height: 45%;
        }

        .scrapbook-item:nth-child(13) {
            transform: rotate(-5deg);
            top: 90%;
            left: 25%;
            z-index: 1;
            width: auto;
            height: 50%;
        }

        .scrapbook-item:nth-child(14) {
            transform: rotate(6deg);
            top: 90%;
            left: 50%;
            z-index: 1;
            width: auto;
            height: 60%;
        }

        .scrapbook-item:nth-child(15) {
            transform: rotate(-7deg);
            top: 99%;
            left: 70%;
            z-index: 1;
            width: 25%;
            height: auto;
        }

        .scrapbook-item:nth-child(16) {
            transform: rotate(5deg);
            top: 0%;
            left: 20%;
            z-index: 1;
            width: auto;
            height: 50%;
        }

        .scrapbook-item:nth-child(17) {
            transform: rotate(-3deg);
            top: 80%;
            left: 40%;
            z-index: 2;
            width: auto;
            height: 55%;
        }

        .scrapbook-item:nth-child(18) {
            transform: rotate(2deg);
            top: 80%;
            left: 72%;
            z-index: 2;
            width: 30%;
            height: auto;
        }



        .scrapbook-item:hover {
            transform: translate(0, 0) rotate(0deg);
            box-shadow: 5px 5px 20px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }

        .scrapbook-item img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            cursor: pointer;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .modal img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }

        .formframe {
            background-image: linear-gradient(135deg,
            #4b0082 12.5%, #000000 12.5%,
            #000000 25%, #76ff03 25%,
            #76ff03 37.5%, #4b0082 37.5%,
            #4b0082 50%, #000000 50%,
            #000000 62.5%, #76ff03 62.5%,
            #76ff03 75%, #4b0082 75%,
            #4b0082 87.5%, #000000 87.5%,
            #000000 100%
        );
            border: 10px solid #F5E9D9;
            padding: 10px;
        }
        .form {
            display: block;
            background: #fff;
            padding: 15px;
            width: 100%;
            height: 100%;
            box-sizing: border-box;
        }

        .pictureframe {
            background-image: linear-gradient(135deg,
            #4b0082 12.5%, #000000 12.5%,
            #000000 25%, #76ff03 25%,
            #76ff03 37.5%, #4b0082 37.5%,
            #4b0082 50%, #000000 50%,
            #000000 62.5%, #76ff03 62.5%,
            #76ff03 75%, #4b0082 75%,
            #4b0082 87.5%, #000000 87.5%,
            #000000 100%
        );
            border: 10px solid #F5E9D9;
            padding: 10px;
        }
        .picturebook {
            display: block;
            background: #fff;
            padding: 15px;
            width: 100%;
            height: 100%;
            box-sizing: border-box;
        }
        .background-gif-container {
            background-image: url('images/mysterybox/backgroundpipes.gif');
            background-size: cover;
            background-position: center;
            background-repeat: repeat;
            width: 100%; /* Adjust as needed */
            height: 100vh; /* Full height of the viewport */
        }

</style>
        
    </style>
</head>
<body class="background-gif-container bg-gray-100 font-sans">
    <div class="formframe container mx-auto p-4">
        <header class="form bg-white shadow-md rounded-lg p-6 mb-6 text-center">
            <h1 class="text-3xl font-bold text-gray-800">Mystery Box 2024</h1>
        </header>
    </div>

    <!-- Hidden Message unless on mobile -->
    <div class="formframe md:hidden">
        <p class="form bg-white shadow-md rounded-lg p-6 mb-6 text-center">
            You should totally open this website up on your desktop but!! It works, but ya boi put MINIMAL effort into supporting mobile!
        </p>
    </div>

    <div class="container mx-auto p-4">
        

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="formframe">
                <div class="form bg-white shadow-md rounded-lg p-4">
                    <h2 class="text-xl font-semibold mb-4 text-gray-700">Photo Scrapbook</h2>
                    <div class="scrapbook-container">
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/22ann1.jpeg" alt="Placeholder 1" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/22food1.jpeg" alt="Placeholder 2" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/22food2.jpeg" alt="Placeholder 3" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/22food3.jpeg" alt="Placeholder 4" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/22food4.jpeg" alt="Placeholder 1" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/22food5.jpeg" alt="Placeholder 2" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/22food6.jpeg" alt="Placeholder 3" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/22kitchen1.jpeg" alt="Placeholder 4" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/23annfood.jpeg" alt="Placeholder 1" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/23back.jpeg" alt="Placeholder 2" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/23food1.jpeg" alt="Placeholder 3" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/23food2.jpeg" alt="Placeholder 4" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/23food3.jpeg" alt="Placeholder 1" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/23food4.jpeg" alt="Placeholder 2" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/23food5.jpeg" alt="Placeholder 3" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/23food6.jpeg" alt="Placeholder 4" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/23kitchen2.jpeg" alt="Placeholder 3" class="w-full h-full">
                        </div>
                        <div class="scrapbook-item w-40 h-32 rounded-md overflow-hidden">
                            <img src="images/mysterybox/23menu.jpeg" alt="Placeholder 4" class="w-full h-full">
                        </div>
                    </div>
                </div>
            </div>
            <div class="formframe space-y-6">
                <div class="form bg-white shadow-md rounded-lg p-4">
                    <h2 class="text-xl font-semibold mb-4 text-gray-700">Form</h2>
                    <form id="myForm">
                        <div class="mb-4">
                            <label for="name" class="block text-gray-700 text-sm font-bold mb-2">Name:</label>
                            <input type="text" id="name" name="name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                        </div>
                        <div class="mb-4">
                            <label for="email" class="block text-gray-700 text-sm font-bold mb-2">Email:</label>
                            <input type="email" id="email" name="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                        </div>
                        <!-- New section: Ingredient -->
                        <div class="mb-4">
                            <label for="ingredient" class="block text-gray-700 text-sm font-bold mb-2">Ingredient (Vegatarian or Pescatarian please):</label>
                            <input type="text" id="ingredient" name="ingredient" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="e.g., Honey">
                        </div>
                        <div class="mb-4">
                            <label for="ingredientLink" class="block text-gray-700 text-sm font-bold mb-2">[Optional] Link to ingredient e.g. Woolies:</label>
                            <input type="text" id="ingredientLink" name="ingredientLink" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="https://woolworths.com.au/ingredient">
                        </div>
                        <div class="mb-4">
                            <label for="DietryRequirements" class="block text-gray-700 text-sm font-bold mb-2">[Optional] Anything for us to be aware of when cooking e.g. Allergies, Diet, etc.:</label>
                            <input type="text" id="DietryRequirements" name="DietryRequirements" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="e.g. Halal">
                        </div>

                        <!-- New section: Up to 3 homies -->
                        <div class="mb-4">
                            <label for="homies" class="block text-gray-700 text-sm font-bold mb-2">Up to 3 homies you want to sit with (All homies not guaranteed):</label>
                            <div class="space-y-2">
                                <input type="text" id="homie1" name="homie1" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Homie 1">
                                <input type="text" id="homie2" name="homie2" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Homie 2">
                                <input type="text" id="homie3" name="homie3" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Homie 3">
                            </div>
                        </div>
                    </form>
                    <button id="submitButton" class="w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Submit</button>
                    <div style="height: 5px;"></div>
                    <button id="redirectButton" class="hidden w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Go to Paypal Payment Page</button>
                    
                    <div id="submissionSuccess" class="hidden mt-4 text-center">
                        <p class="text-gray-600 text-sm">Submitted Successfully! If you didnt get the redirect to the Paypal link - I'm sorry - Please go to: https://www.paypal.me/EADann</a> .</p>
                    </div>
                    
                    <div id="submissionFailure" class="hidden mt-4 text-center">
                        <p class="text-gray-600 text-sm">OH NO! The form failed to Submit and now WE DONT HAVE YOUR DETAILS?!??!, and what's worse I have NO IDEA WHY?!?!? Please reach out to Ann and/or Tys who will take your submission manually.</p>
                    </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto p-4 mt-8">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
            <!-- Left section: Explanation of the event -->
            <div class="formframe">
                <div class="form bg-white shadow-md rounded-lg p-6">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">About the Event</h2>
                    <p class="text-gray-600 leading-relaxed">
                        You know the drill: each year, for my birthday, each of you assigns me an ingredient. Then I take all of these ingredients, come up with a crackpot BONKERS menu that incorporates every single one of them, and then cook it for you all!<br>
                        As with last year, I will procure all the ingredients, so please provide a link to the ingredient in the form if possible. However, if you have something ultra super special to give to me, please contact me to arrange the exchange after submitting the form.<br>
                        We will be cooking a mostly vegatarian menu, with some pescatarian dishes in the mix, so please select your ingredients accordingly.<br>
                        There is a small ticket cost to cover a portion of the expenses of venue hire and ingredients; the form will redirect you to a Paypal link to help collect your contribution.<br>
                        As always, if you are in financial difficulty and the cost of the ticket will prevent your attendance, please just let me know! No problems, no questions asked, big love and mutual support to the homies always.<br>
                    </p>
                </div>
            </div>
        
            <!-- Stylish Line -->
            <div class="md:hidden my-6 border-t border-dashed border-gray-300"></div>
    
            <!-- Right section: Details of the event -->
            <div class="formframe">
                <div class="form bg-white shadow-md rounded-lg p-6">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Event Details</h2>
                    <ul class="text-gray-600">
                        <li class="mb-3">
                            <span class="font-bold text-gray-800">Date:</span> 21st December 2024
                        </li>
                        <li class="mb-3">
                            <span class="font-bold text-gray-800">Time:</span> 6:00 PM - 11:00 PM
                        </li>
                        <li class="mb-3">
                            <span class="font-bold text-gray-800">Location:</span> Sydney (Venue being secured!)
                        </li>
                        <li class="mb-3">
                            <span class="font-bold text-gray-800">Cost to Cover:</span> $25 per person
                        </li>
                        <li class="mb-3">
                            <span class="font-bold text-gray-800">Dress Code:</span> Dress like your ingredient!
                        </li>
                        <li class="mb-3">
                            <span class="font-bold text-gray-800">Diet:</span> Vegatarian, with some pescatarian dishes.
                        </li>
                        <li class="mb-3">
                            <span class="font-bold text-gray-800">Plus One Rules:</span> Please Please Please give advance notice of any +1's and get approval first!
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    

    <!-- Modal for Image Expand -->
    <div id="imageModal" class="modal">
        <img id="modalImage" src="#" alt="Expanded Image">
    </div>

    <script>
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Script to handle modal behaviour
        const modal = document.getElementById("imageModal");
        const modalImg = document.getElementById("modalImage");

        document.querySelectorAll('.scrapbook-item img').forEach(img => {
            img.addEventListener('click', function() {
                modalImg.src = this.src;
                modal.style.display = "flex";
            });
        });

        // Close the modal when clicking outside the image or pressing ESC key
        modal.addEventListener('click', function(e) {
            if (e.target !== modalImg) {
                modal.style.display = "none";
            }
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === "Escape") {
                modal.style.display = "none";
            }
        });

        const form = document.getElementById('myForm');
        const submitButton = document.getElementById('submitButton');
        
        submitButton.addEventListener('click', async (event) => {
            event.preventDefault();
            
            // Collect form data
            const formData = {
                name: form.name.value,
                email: form.email.value,
                ingredient: form.ingredient.value,
                link: form.ingredientLink.value,
                dietaryRequirements	: form.DietryRequirements.value,
                homies: [
                    form.homie1.value,
                    form.homie2.value,
                    form.homie3.value
                ]
            };

            // Change button state to indicate loading
            submitButton.disabled = true; // Disable the button
            submitButton.innerText = 'Submitting...'; // Change button text

            // Send data to Val.town
            const response = await fetch('https://thesyght-reverentharlequinmacaw.web.val.run', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData),
            });

            

            if (response.ok) {
                // Show popup message
                const message = document.createElement('div');
                message.innerText = 'Submission successful! Please now click new button to be forwarded to PayPal to complete your payment.';
                message.style.position = 'fixed';
                message.style.top = '50%';
                message.style.left = '50%';
                message.style.transform = 'translate(-50%, -50%)';
                message.style.backgroundColor = '#ffffff';
                message.style.padding = '20px';
                message.style.boxShadow = '0 4px 8px rgba(0,0,0,0.2)';
                message.style.zIndex = '1000';
                document.body.appendChild(message);

                sleep(3000).then(() => {
                    document.body.removeChild(message); // Remove the message after redirect
                    submitButton.innerText = 'Submission was Successful'; // Reset button text
                    redirectButton.style.display = 'block'; // Show the redirect button
                });
                
                
            } else {
                alert('There was a problem submitting the form!!!');
                submitButton.innerText = 'Submit again? Previous Submission Failed?!?'; // Reset button text on error
                submitButton.disabled = false; // Re-enable the button
                submissionFailure.style.display = 'block';
            }
        });

        redirectButton.addEventListener('click', async (event) => {
            event.preventDefault();
            window.open('https://www.paypal.me/EADann', '_blank'); // Replace with your PayPal link
            redirectButton.innerText = 'Opening Paypal in new tab...'; // Reset button text
            sleep(3000).then(() => {
                redirectButton.innerText = 'Go to Paypal Payment Page'; // Reset button text
                submissionSuccess.style.display = 'block';
            });
        });

        // Handle seat selection
        const seatButtons = document.querySelectorAll('.seat');
        seatButtons.forEach(seat => {
            seat.addEventListener('click', () => {
                seat.classList.toggle('selected');
            });
        });
    </script>
</body>
</html>
